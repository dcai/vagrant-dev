- name: Pip | Upgrade system pip packages
  pip: name={{ item }}  state=present extra_args="--upgrade"
  with_items:
    - pip
    - ps_mem

- name: Pip | install packages
  become: yes
  become_user: "{{ home_username }}"
  pip: name={{ item }}  state=present extra_args="--user --upgrade"
  with_items:
    - tmuxp
    - pgcli
    - mycli
    - httpie

- name: tmuxp | Create ~/.tmuxp
  file:
    path: "{{ home_dir }}/.tmuxp"
    state: directory
    owner: "{{ home_username }}"
    group: "{{ home_usergroup }}"
    mode: 0775

- name: tmuxp | create config
  copy:
    dest: "{{ home_dir }}/.tmuxp/dev.yaml"
    owner: "{{ home_username }}"
    group: "{{ home_usergroup }}"
    mode: 0775
    content: |
      session_name: dev
      start_directory: '~'
      windows:
      - window_name: dev
        layout: tiled
        shell_command_before:
          - cd ~/                    # run as a first command in all panes
        panes:
          - shell_command:           # pane no. 1
              - cd /var/log          # run multiple commands in this pane
              - ls -al | grep \.log
          - echo second pane         # pane no. 2
          - echo third pane          # pane no. 3
          - echo forth pane          # pane no. 4
